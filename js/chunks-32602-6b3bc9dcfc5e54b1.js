(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32602],{875193:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var a=n(667294);let i=e=>{let t=(0,a.useRef)(!1),[n,i]=(0,a.useState)(e);return(0,a.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),[n,(0,a.useCallback)(e=>t.current?i(e):()=>{},[])]}},356111:function(e,t,n){"use strict";n.d(t,{q:function(){return m}});var a=n(785893),i=n(667294),r=n(840489),s=n(630442),l=n(748281),o=n(617421),c=n(903719),d=n(875193),u=n(271866),_=n.n(u);let h=e=>{let{src:t,alt:n,title:r,fallback:s=null}=e,[l,o]=(0,d.F)((0,a.jsx)("img",{src:t,alt:n,title:r}));return(0,i.useEffect)(()=>{let e=new Image;return e.onload=()=>{o((0,a.jsx)("img",{src:t,alt:n,title:r}))},e.onerror=()=>{o(s)},e.src=t,()=>{e=null}},[t,n,r,s,o]),(0,a.jsx)(a.Fragment,{children:l})},f=e=>"href"in e,m=e=>{let{name:t="",alt:n="",title:i,type:d,src:u,size:m,badge:p,className:x,...v}=e,g=(0,r.W)([_().avatar,_()[d],x,m&&_()[m]]),j=(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsx)("div",{className:_().badge,children:function(e){switch(e){case"ambassador":case"pro":return(0,a.jsx)(s.default,{});case"employee":case"subscriber":case"premium":return(0,a.jsx)(l.default,{});case"verified":return(0,a.jsx)(o.default,{});default:return null}}(p)}),(0,a.jsx)("div",{className:_().imgWrapper,children:(0,a.jsx)(h,{src:u,alt:n,title:i||t,fallback:"athlete"===d?(0,a.jsx)(c.default,{}):null})})]});return f(v)?(0,a.jsx)("a",{className:g,"data-testid":"avatar-wrapper",...v,children:j}):(0,a.jsx)("div",{className:g,"data-testid":"avatar-wrapper",...v,children:j})}},816156:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var a=n(785893),i=n(667294),r=n(840489),s=n(805431),l=n.n(s);let o=i.forwardRef((e,t)=>{let{children:n,className:i,variant:s="default",...o}=e;return(0,a.jsx)("button",{className:(0,r.W)(l().btn,l()[s],i),ref:t,...o,children:n})})},208327:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var a=n(785893),i=n(667294),r=n(840489),s=n(805431),l=n.n(s);let o=(0,i.forwardRef)((e,t)=>{let{href:n,children:i,className:s,variant:o="default",...c}=e;return(0,a.jsx)("a",{ref:t,href:n,className:(0,r.W)(l().btn,l()[o],s),...c,children:i})})},858335:function(e,t,n){"use strict";n.d(t,{Qj:function(){return i.Q},zx:function(){return a.z}});var a=n(816156),i=n(208327)},922056:function(e,t,n){"use strict";n.d(t,{Lt:function(){return v},PS:function(){return _},Vs:function(){return m},_2:function(){return p},f9:function(){return f},hP:function(){return x},h_:function(){return u},sV:function(){return h}});var a=n(785893);n(667294);var i=n(840489),r=n(314155),s=n(377079);n(136216);var l=n(805431),o=n.n(l),c=n(464307),d=n.n(c);function u(e){let{children:t,...n}=e;return(0,a.jsx)(r.v2,{...n,children:t})}function _(e){let{className:t,children:n,onClick:s,...l}=e;return(0,a.jsx)(r.j2,{className:(0,i.W)(o().btn,o().default,d().btn,t),onClick:s,...l,children:n})}function h(e){let{className:t,children:n,...s}=e;return(0,a.jsx)(r.qy,{className:(0,i.W)(d().list,t),...s,children:n})}function f(e){let{className:t,children:n,portal:s,...l}=e;return(0,a.jsx)(r.YI,{className:(0,i.W)(d().list,t),portal:s,...l,children:n})}function m(e){let{className:t,children:n,...s}=e;return(0,a.jsx)(r.sd,{className:(0,i.W)(d().list,t),...s,children:n})}r.v2.displayName="DropdownMenu",r.j2.displayName="DropdownButton",r.qy.displayName="DropdownList",r.v2.displayName="DropdownPopover",r.sd.displayName="DropdownItems";let p=e=>{let{as:t,href:n,children:s,className:l,...o}=e;return(0,a.jsx)(r.Uk,{as:t,className:(0,i.W)(d().item,l),href:n,...o,children:s})};function x(e){let{as:t,onSelect:n,children:s,className:l,...o}=e;return(0,a.jsx)(r.sN,{as:t,className:(0,i.W)(d().item,l),onSelect:n,...o,children:s})}function v(e){let{text:t,children:n,onClick:i=()=>{},className:r,buttonClassName:l,...o}=e;return(0,a.jsxs)(u,{children:[(0,a.jsxs)(_,{className:l||r,onClick:i,...o,children:[t,(0,a.jsx)(s.default,{className:d().icon})]}),(0,a.jsx)(h,{className:r,portal:!1,hidden:!1,children:n})]})}r.Uk.displayName="DropdownLink",r.sN.displayName="DropdownItem"},581932:function(e,t,n){"use strict";n.d(t,{ZA:function(){return _},fe:function(){return x},fj:function(){return p},hz:function(){return h},nK:function(){return m},ol:function(){return v},r6:function(){return f},u_:function(){return g}});var a=n(785893),i=n(667294),r=n(840489),s=n(980512),l=n(898194),o=n(797944),c=n(816156);n(982405);var d=n(41761),u=n.n(d);let _=i.forwardRef((e,t)=>{let{className:n,children:i,...l}=e;return(0,a.jsx)(s.t9,{ref:t,className:(0,r.W)(u().overlay,n),...l,children:i})}),h=e=>{let{className:t,children:n,...i}=e;return(0,a.jsx)(s.cZ,{className:(0,r.W)(u().dialog,t),...i,children:n})},f=e=>{let{className:t,children:n,...i}=e;return(0,a.jsx)("h2",{className:(0,r.W)(u().title,t),...i,children:n})},m=e=>{let{className:t,children:n,...i}=e;return(0,a.jsx)("div",{className:(0,r.W)(u().actions,t),...i,children:n})},p=e=>{let{className:t,src:n,alt:i,...s}=e;return(0,a.jsx)("img",{src:n,alt:i,className:(0,r.W)(u().heroImage,t),...s})},x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.W)(u().body,t),...n})},v=e=>{let{className:t,color:n,...i}=e;return(0,a.jsx)(c.z,{type:"button",variant:"icon",className:t,...i,children:(0,a.jsx)(l.default,{fill:null!=n?n:o.jz})})},g=e=>{let{className:t,isOpen:n=!1,onDismiss:i,hasClose:r,children:s,initialFocusRef:l,...o}=e;return(0,a.jsx)(_,{isOpen:n,onDismiss:i,initialFocusRef:l,children:(0,a.jsxs)(h,{className:t,...o,children:[r&&(0,a.jsx)(v,{className:u().closeButton,onClick:i,"data-testid":"modal-close-button"}),s]})})};g.Overlay=_,g.Content=h,g.Title=f,g.Actions=m,g.HeroImage=p,g.Body=x,g.CloseButton=v},170243:function(e,t,n){"use strict";n.d(t,{Ph:function(){return p}});var a=n(785893),i=n(667294),r=n(931776),s=n(524163),l=n(230260),o=n(840489),c=n(797944),d=n(236363),u=n(938690),_=n(691686),h=n.n(_);let f={container:e=>({...e,borderColor:c.x6}),control:e=>({...e,background:c.i4,border:"1px solid ".concat(c.l5),borderRadius:d.NC,boxShadow:"",boxSizing:"border-box",minHeight:"40px",flexWrap:"nowrap","&:hover":{borderColor:c.FR}}),indicatorSeparator:()=>({display:"none"}),dropdownIndicator:e=>({...e,color:c.x6}),menu:e=>({...e,marginTop:0,zIndex:999}),menuList:e=>({...e,padding:0}),multiValue:e=>({...e,backgroundColor:c.Ro,flexShrink:0}),multiValueLabel:e=>({...e,color:c.tK,fontSize:u.gN,lineHeight:u.GP}),multiValueRemove:e=>({...e,"&:hover":{backgroundColor:c.l5,color:c.jz},svg:{height:"16px",width:"16px"}}),option:(e,t)=>({...e,alignItems:"center",display:"flex",backgroundColor:(null==t?void 0:t.isFocused)?c.IC:(null==t?void 0:t.isSelected)?c.IC:c.i4,color:"inherit",fontSize:u.gN,lineHeight:u.GP,padding:"".concat(d.PC," ").concat(d.L3),"&:active":{backgroundColor:c.IC}}),valueContainer:e=>({...e,flexWrap:"wrap"}),placeholder:e=>({...e,color:c.DT}),singleValue:e=>({...e})},m=(e,t)=>Object.fromEntries(Object.entries(e).map(e=>{let[n,a]=e;return[n,(e,i)=>{var r;let{override:s,...l}=a(e,i);return{...!s&&e,...l,...t&&n in t&&(null===(r=t[n])||void 0===r?void 0:r.call(t,l,i))}}]})),p=(0,i.forwardRef)((e,t)=>{var n;let{className:i,components:c={},styles:d={},...u}=e,_=m(f,d),p=u.creatable?l.Z:r.ZP;return(0,a.jsx)(p,{...u,components:{...s.c,...c,Menu:u.hideMenu?()=>null:null!==(n=c.Menu)&&void 0!==n?n:s.c.Menu},className:(0,o.W)(h().select,i),styles:_,ref:t})})},93587:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var a=n(785893);n(667294);var i=n(840489),r=n(649076),s=n.n(r);let l=e=>{let{className:t,color:n="default",size:r=20,dataTestId:l="loading",...o}=e;return(0,a.jsx)("span",{className:(0,i.W)(s().spinner,t),"data-testid":l,...o,children:(0,a.jsx)("span",{className:(0,i.W)(s().graphic,n),style:{width:"".concat(r,"px"),height:"".concat(r,"px")}})})}},131791:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var a=n(785893);n(667294);var i=n(840489),r=n(797944);let s=e=>{let{className:t,id:n="stravalogo",alt:s="Strava",width:l="auto",height:o="auto",fill:c=r.uB,style:d,...u}=e;return(0,a.jsxs)("svg",{role:"img",viewBox:"0 0 485 95","aria-labelledby":n,className:(0,i.W)(t),xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:l,height:o,...d},...u,children:[(0,a.jsx)("title",{id:n,children:s}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M258.505 90.4524L258.502 90.4484H284.108L299.838 58.8214L315.567 90.4484H346.682L299.835 -0.000610352L255.366 85.8686L238.292 60.9384C248.834 55.8544 255.405 47.0494 255.405 34.4014V34.1524C255.405 25.2254 252.678 18.7764 247.469 13.5674C241.392 7.49139 231.596 3.64739 216.22 3.64739H173.809V90.4524H202.827V65.6504H209.027L225.396 90.4524H258.505ZM437.447 -0.000610352L390.606 90.4484H421.721L437.45 58.8214L453.18 90.4484H484.294L437.447 -0.000610352ZM368.669 94.0074L415.51 3.55839H384.396L368.666 35.1854L352.936 3.55839H321.822L368.669 94.0074ZM215.352 44.9414C222.295 44.9414 226.512 41.8414 226.512 36.5094V36.2604C226.512 30.6804 222.171 27.9524 215.476 27.9524H202.827V44.9414H215.352ZM111.753 28.2004H86.2089V3.64739H166.316V28.2004H140.772V90.4524H111.753V28.2004ZM15.5019 58.9544L-9.15527e-05 77.4314C11.0369 87.1054 26.9099 92.0644 44.5179 92.0644C67.8319 92.0644 82.8369 80.9034 82.8369 62.6734V62.4264C82.8369 44.9414 67.9559 38.4924 45.7589 34.4014C36.5819 32.6634 34.2259 31.1774 34.2259 28.8204V28.5724C34.2259 26.4644 36.2109 24.9764 40.5499 24.9764C48.6099 24.9764 58.4079 27.5804 66.5909 33.5324L80.7289 13.9404C70.6839 6.00339 58.2839 2.03439 41.5429 2.03439C17.6079 2.03439 4.71191 14.8084 4.71191 31.3004V31.5494C4.71191 49.9014 21.8259 55.4834 41.2939 59.4494C50.5949 61.3104 53.3219 62.6734 53.3219 65.1544V65.4034C53.3219 67.7584 51.0909 69.1214 45.8819 69.1214C35.7139 69.1214 24.9259 66.1474 15.5019 58.9544Z",fill:c})]})}},139575:function(e,t,n){"use strict";n.d(t,{e2:function(){return eW},Dt:function(){return ek}});var a=n(785893),i=n(667294),r=n(213980),s=n.n(r),l=n(444347),o=n(854630),c=n(693197),d=n(840489),u=n(799022),_=n(503753),h=n(361043);let f=function(){let{shouldResendOnMount:e=!1,logError:t=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),l=()=>{r||(s(!0),(0,h.default)({options:{headers:{accept:"application/json, text/plain, */*"}}}).post("/athlete/resend_email").then(()=>{a(!0),s(!1)}).catch(e=>{t(e),s(!1)}))};return(0,i.useEffect)(()=>{e&&l()},[]),{resendEmail:l,closeModal:()=>{a(!1)},isModalOpen:n,isResendEmailInProgress:r}};var m=n(811607),p=n(581932),x=n(352194),v=n.n(x);let g="microfrontends.email_verification",j=e=>{let{isModalOpen:t,closeModal:n,optionalExplanation:i="",email:r}=e,{t:s}=(0,c.D)();return(0,a.jsxs)(p.u_,{isOpen:t,onDismiss:n,"aria-label":s("".concat(g,".headline")),children:[(0,a.jsx)(p.ol,{title:s("".concat(g,".close_modal")),onClick:n,className:v().closeButton}),(0,a.jsxs)(p.fe,{className:v().modalBody,children:[(0,a.jsx)("div",{className:v().confirmEmailIcon}),(0,a.jsx)("h2",{children:s("".concat(g,".headline"))}),i&&(0,a.jsx)("p",{children:i}),(0,a.jsx)("p",{"data-testid":"email-resent-text",children:(0,a.jsx)(m.Lu,{noWrap:!0,content:s("".concat(g,".prompt_html"),{pending_email:r,class_name:v().emailText})})}),(0,a.jsx)("hr",{}),(0,a.jsx)("small",{children:(0,a.jsx)(m.Lu,{noWrap:!0,content:s("".concat(g,".wrong_email_html"),{email_settings_path:"/settings/email_change"})})})]})]})};var y=n(299939),b=n(398656),N=n(875193);async function C(e){let{logError:t,useStagingApi:n,currentLanguage:a}=e;try{let{data:e}=await (0,h.default)({useStagingApi:n,currentLanguage:a}).get("/frontend/athlete/notifications");return{notifications:e}}catch(e){return t(e),{notifications:[]}}}async function w(e){let{logError:t,useStagingApi:n,currentLanguage:a}=e;try{let{data:e}=await (0,h.default)({useStagingApi:n,currentLanguage:a}).post("/frontend/athlete/notifications/mark_all_read");return{notifications:e}}catch(e){return t(e),{notifications:[]}}}async function M(e){let{logError:t,useStagingApi:n}=e;try{let{data:e}=await (0,h.default)({useStagingApi:n}).get("/frontend/athlete/notifications/num_new_notifications");return{count:e}}catch(e){return t(e),{count:0}}}var B=n(93587);let k=(0,i.createContext)(void 0);k.displayName="NotificationsContext";let L=()=>{let e=(0,i.useContext)(k);if(!e)throw Error("useNotificationsContext must be used within the NotificationsContext.Provider");return e},I=e=>{let{children:t,notification:n,trackNotifClick:r}=e,{email:s}=n.props,{state:l,dispatch:o}=L(),{resendEmail:c,isResendEmailInProgress:d}=l;return(0,i.useEffect)(()=>{""===l.email&&o({type:"UPDATE_EMAIL_VERIF_MODAL_EMAIL",payload:{email:s}})},[o,s,l.email]),(0,a.jsx)("button",{id:"email-verif-btn",onClick:()=>{r(),c()},disabled:d,children:t})},E=e=>{let{children:t,notification:n,trackNotifClick:i}=e;return(0,a.jsx)("a",{href:n.actionable_link,onClick:i,children:t},n.id)},S=e=>{let{children:t,notification:n}=e;return(0,a.jsx)("div",{children:t},n.id)};var A=n(356111),D=n(189290),H=n.n(D);let W=e=>{let{notification:t}=e;return(0,a.jsxs)("div",{className:H().notificationContent,children:[(0,a.jsx)("div",{className:H().notificationAvatar,children:(0,a.jsx)(A.q,{src:t.icon,type:"athlete",size:"small",title:"",name:""})}),(0,a.jsxs)("div",{className:H().textContainer,children:[t.title&&(0,a.jsx)("p",{className:H().notificationTitle,children:t.title}),(0,a.jsx)(m.Lu,{tagName:"p",noHtml:!0,content:t.text}),(0,a.jsx)("p",{className:H().displayDate,children:t.display_date})]})]})};var R=n(975344),O=n.n(R);let F=e=>"verify_email_prompt"===e.category?I:"javascript://"===e.actionable_link?S:E,V=e=>{let{notifications:t,isLoading:n=!1}=e,{t:r}=(0,c.D)(),{track:s}=(0,_.O)(),l=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{l.current&&(s({category:"notification",page:"pull_notification",action:"screen_enter",element:"pull_notification_list"}),l.current=!1);let e=()=>{s({category:"notification",page:"pull_notification",action:"screen_exit",element:"pull_notification_list"})};return window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("beforeunload",e)}},[s]),(0,a.jsxs)("ul",{className:O().notifications,id:"notifications-list","aria-labelledby":"notifications","data-cy":"notifications-list",children:[0===t.length&&(0,a.jsxs)("li",{className:O().notificationsEmpty,children:[n&&(0,a.jsx)(B.$,{}),!n&&(0,a.jsx)("p",{children:r("microfrontends.notifications.no_notifications")})]}),t.length>0&&t.map(e=>{let t=F(e);return(0,a.jsx)("li",{className:(0,d.W)(!e.read&&O().notificationUnread),children:(0,a.jsx)(t,{notification:e,trackNotifClick:()=>{s({category:"notification",page:"pull_notification",action:"click",element:e.category.replace(/-/g,"_"),properties:{notification_id:e.id,category:e.category,destination:e.actionable_link||""}})},children:(0,a.jsx)(W,{notification:e})},e.id)},e.id)})]})},P=(e,t)=>{if("UPDATE_EMAIL_VERIF_MODAL_EMAIL"===t.type){let{email:n}=t.payload;return{...e,email:n}}};var T=n(855747),q=n.n(T);let z=e=>{let{appContext:t}=e,{useStagingApi:n=!1}=t,{logError:r}=(0,u.D)(),{t:s,getLanguage:l}=(0,c.D)(),o=l(),h=(0,i.useMemo)(()=>({useStagingApi:n,logError:r,currentLanguage:o}),[r,n,o]),{track:m}=(0,_.O)(),p=(0,i.useRef)(null),x=(0,i.useRef)(null),[v,g]=(0,N.F)([]),[B,L]=(0,N.F)(0),[I,E]=(0,N.F)(!1),[S,A]=(0,N.F)(!1),[D,H]=(0,N.F)(!1),{resendEmail:W,closeModal:R,isModalOpen:O,isResendEmailInProgress:F}=f({logError:r}),[T,z]=(0,i.useReducer)(P,{isResendEmailInProgress:F,resendEmail:W,email:""}),G=(0,i.useMemo)(()=>({state:T,dispatch:z}),[T]),Z=(()=>{let e="microfrontends.notifications.new_notifications_title",t=s(e,{count:B});return t.match(e)?s(e+=1===B?".one":".other",{count:B}):t})();(0,i.useEffect)(()=>{A(!0),(async()=>{let{count:e}=await M(h);L(e),A(!1)})()},[h,A,L]),(0,i.useEffect)(()=>{let e=new Event("notificationsReady");document.dispatchEvent(e)},[]);let U=e=>{var t;(null==p?void 0:null===(t=p.current)||void 0===t?void 0:t.contains(e.target))||Y()},Q=e=>{"Escape"===e.key&&Y()},X=async()=>{E(!0),document.addEventListener("mousedown",U),document.addEventListener("keydown",Q),m({category:"notification",page:"pull_notification",action:"click",element:"bell"}),D||(A(!0),C(h).then(e=>{let{notifications:t}=e;g(t),A(!1),H(!0),B>0&&w(h)}))},Y=()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",Q),B>0&&(L(0),g(e=>e.map(e=>({...e,read:!0})))),E(!1)};return(0,i.useEffect)(()=>{O&&E(!1)},[O,E]),(0,a.jsx)(k.Provider,{value:G,children:(0,a.jsxs)("div",{ref:p,className:q().notificationsMenu,children:[(0,a.jsxs)("button",{ref:x,title:Z,className:(0,d.W)(q().navBarButton,q().notificationsButton),onClick:I?Y:X,"aria-expanded":I,"aria-controls":"notifications-list","data-cy":"notifications-bell",children:[I?(0,a.jsx)(y.default,{className:(0,d.W)(q().notificationsIcon,q().open)}):(0,a.jsx)(b.default,{className:q().notificationsIcon}),B>0&&(0,a.jsx)("div",{"data-testid":"unread-ball",className:q().notificationsCount,"aria-hidden":!0,children:B<10?B:"9+"})]}),I&&(0,a.jsx)(V,{notifications:v,isLoading:S}),O&&(0,a.jsx)(j,{isModalOpen:O,closeModal:R,email:T.email})]})})};var G=n(723439),Z=n(693417),U=n(681030),Q=n(377876),X=n(691876),Y=n(65592),K=n(858335),J=n(898194),$=n(822815),ee=n(922056),et=n(170243),en=n(236363),ea=n(938690),ei=n(797944);let er={control:e=>({...e,height:42}),menu:e=>({...e,width:350}),option:e=>({...e,padding:"".concat(en.XG," ").concat(en.PC),fontSize:ea.uh,"&:first-of-type":{backgroundColor:ei.Ro,fontSize:ea.uP}})},es={activities:"activities/recent",athletes:"following",clubs:"clubs",segments:"segments"},el={activities:"/athlete/training",athletes:"/athletes/search",clubs:"/clubs/search",segments:"/segments/search"},eo=(e,t)=>{let n=new URLSearchParams,a="".concat(el[e]);switch(e){case"activities":case"segments":n.append("keywords",t);break;default:n.append("text",t)}return"".concat(a,"?").concat(n.toString())};var ec=n(618748),ed=n.n(ec);let eu=e=>{let{name:t,id:n,searchEntity:i,__isNew__:r=!1,...s}=e,{t:l}=(0,c.D)(),o="/".concat(i,"/").concat(n);return r?s.label:t&&n&&i?(0,a.jsx)("a",{href:o,className:ed().searchOption,children:(()=>{if("segments"===i){let{city:e,state:n,country:i}=s,r=[e,n,i].filter(Boolean).join(l("nav.search.segment_location_separator"));return(0,a.jsxs)("div",{className:ed().multiline,children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{className:ed().subtitle,children:r})]})}return"athletes"===i||"clubs"===i?(0,a.jsxs)(a.Fragment,{children:[s.picture&&(0,a.jsx)(A.q,{src:s.picture,size:"small",type:"athletes"===i?"athlete":"club"}),(0,a.jsx)("span",{children:t})]}):(0,a.jsx)("span",{children:t})})()}):null};eu.propTypes={searchEntity:s().string,name:s().string,id:s().number,__isNew__:s().bool,picture:s().string,country:s().string,state:s().string,city:s().string};var e_=n(730530);let eh=(e,t)=>{let{data:n}=(0,e_.a)({queryKey:["search",e],queryFn:async()=>{let{data:t}=await (0,h.default)().get("/athlete/".concat(es[e]));return t},enabled:t,staleTime:3e5});return n},ef=e=>{let{searchOpen:t,setSearchOpen:n}=e,{track:r}=(0,_.O)(),{t:s}=(0,c.D)(),l=(0,i.useRef)(null),o=(0,i.useRef)(null),[d,u]=(0,i.useState)("athletes"),[h,f]=(0,i.useState)(null),[m,p]=(0,i.useState)(""),x=eh(d,t);if((0,i.useEffect)(()=>{if(!t)return()=>{};let e=e=>{var t;(null===(t=o.current)||void 0===t?void 0:t.contains(e.target))||n(!1)},a=e=>{"Escape"===e.key&&n(!1)};return document.addEventListener("mouseup",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("keydown",a)}},[n,t]),!t)return(0,a.jsx)(K.zx,{variant:"icon",onClick:()=>{r({category:"search",page:"search",action:"click"}),n(!0)},className:ed().searchIcon,children:(0,a.jsx)($.default,{})});let v=e=>{"string"==typeof e?(f({label:e,value:e}),r({category:"search",page:"search",action:"execute_search",properties:{search_type:d,search_text:e}}),window.location.href=eo(d,e)):(f({label:e.label,value:e.id}),r({category:"search",page:"search",action:"click",element:"search_result",properties:{search_type:d,search_text:e.name,entity_id:e.id}}),window.location.href="/".concat(d,"/").concat(e.id))};return(0,a.jsxs)("div",{className:ed().searchWrapper,ref:o,children:[(0,a.jsx)(ee.Lt,{text:s("nav.search.".concat(d)),className:ed().entityDropdown,children:Object.keys(es).map(e=>(0,a.jsx)(ee.hP,{onClick:()=>{var t;u(e),null===(t=l.current)||void 0===t||t.focus()},children:s("nav.search.".concat(e))},e))}),(0,a.jsx)(et.Ph,{styles:er,ref:l,autoFocus:!0,inputId:"global-header-search-input",className:ed().searchInput,placeholder:s("nav.search.search"),closeMenuOnSelect:!0,hideMenu:!m,components:{DropdownIndicator:()=>null,DownChevron:()=>null},noOptionsMessage:()=>null,isSearchable:!0,value:h,onFocus:()=>f(null),onChange:v,inputValue:m,onInputChange:p,options:x?null==x?void 0:x.map(e=>({...e,value:e.id,label:e.name})):[],formatOptionLabel:h?null:e=>(0,a.jsx)(eu,{...e,searchEntity:d}),creatable:!0,createOptionPosition:"first",isValidNewOption:()=>!0,formatCreateLabel:e=>{let t=s("nav.search.search_option.".concat(d));return"".concat(t,": ").concat(e)},onCreateOption:v}),(0,a.jsx)(K.zx,{variant:"icon",onClick:()=>{p(""),f(null),n(!1)},children:(0,a.jsx)(J.default,{})})]})};ef.propTypes={searchOpen:s().bool.isRequired,setSearchOpen:s().func.isRequired};var em=n(377079),ep=n(747726),ex=n.n(ep);let ev=e=>{let{children:t,href:n,className:i,id:r}=e;return(0,a.jsx)("a",{href:n,className:(0,d.W)(ex().button,i),id:r||"",children:t})};ev.propTypes={children:s().node.isRequired,className:s().string,href:s().string,id:s().string};let eg=(0,i.createContext)({id:null}),ej=e=>{let{children:t,id:n}=e;return(0,a.jsx)("div",{className:ex().menu,children:(0,a.jsx)(eg.Provider,{value:{id:n},children:t})})};ej.propTypes={children:s().arrayOf(s().shape()).isRequired,id:s().string.isRequired};let ey=e=>{let{children:t,href:n,className:r,icon:s=!0}=e,{id:l}=(0,i.useContext)(eg);return n?(0,a.jsxs)(ev,{href:n,className:r,id:l,children:[t,s&&(0,a.jsx)(em.default,{className:ex().icon})]}):(0,a.jsxs)("button",{type:"button",className:(0,d.W)(ex().button,r),id:l,children:[t,s&&(0,a.jsx)(em.default,{className:ex().icon})]})};ey.propTypes={children:s().node.isRequired,className:s().string,href:s().string,icon:s().bool};let eb=e=>{let{children:t,className:n="",anchor:r}=e,{id:s}=(0,i.useContext)(eg);return(0,a.jsx)("ul",{className:(0,d.W)(ex().menuItems,n,ex()[r]),"aria-labelledby":s,children:i.Children.map(t,e=>(0,a.jsx)("li",{className:ex().item,children:e}))})};eb.propTypes={anchor:s().string,children:s().node.isRequired,className:s().string};let eN=e=>{let{children:t,className:n,selectedMenu:r}=e;return t?(0,a.jsx)("ul",{className:(0,d.W)(ex().navGroup,n),children:i.Children.map(t,e=>{if(!e)return null;let t=r&&r===e.props.id?ex().selected:"";return(0,a.jsx)("li",{className:(0,d.W)(ex().navItem,t),children:e},"globalNav-".concat(e.props.id))})}):null};eN.propTypes={children:s().arrayOf(s().node),className:s().string,selectedMenu:s().string};var eC=n.p+"static/media/gift.c4661ca5.svg";let ew=e=>{let{currentAthlete:t}=e,{t:n}=(0,c.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(K.Qj,{href:"/gift?origin=global_nav",className:ex().giftBtn,children:[(0,a.jsx)("img",{src:eC,alt:"Strava"}),n("nav.primary.gift")]}),(0,a.jsx)(K.Qj,{href:"/subscribe?cta=".concat(t.is_trial_eligible?"free-trial":"premium","&element=link&origin=global_nav"),variant:"primary",className:(0,d.W)(ex().subscribeBtn,t.is_subscriber&&ex().hide),children:n(t.is_trial_eligible?"nav.primary.start_trial":"nav.primary.subscribe")})]})};ew.propTypes={currentAthlete:s().shape()};var eM=n(834406);let eB=ex().nav,ek=Object.freeze({TRAINING:"training-menu",DASHBOARD:"dashboard-menu",MAPS:"maps-menu",CHALLENGES:"challenges-menu"}),eL=e=>{let{selectedMenu:t}=e,{t:n}=(0,c.D)(),i="".concat(eB," ").concat(ex().loggedout);return(0,a.jsxs)("nav",{children:[(0,a.jsxs)(eN,{className:i,selectedMenu:t,children:[(0,a.jsx)(ev,{href:"/mobile",children:n("nav.primary.mobile")}),(0,a.jsx)(ev,{href:"/features",children:n("nav.primary.features")}),(0,a.jsx)(ev,{href:"/subscribe?origin=logged_out_global_nav",children:n("nav.primary.subscribe")}),(0,a.jsx)(ev,{href:"/maps",id:ek.MAPS,children:n("nav.primary.maps")}),(0,a.jsx)(ev,{href:"//stories.strava.com",children:n("nav.primary.stories")})]}),(0,a.jsxs)(eN,{className:"".concat(i," ").concat(ex().linkButtons),children:[(0,a.jsx)(K.Qj,{variant:"primary",href:"/register",className:ex().linkButton,children:n("nav.athlete.sign_up")}),(0,a.jsx)(K.Qj,{href:"/login",className:ex().linkButton,children:n("nav.athlete.log_in")})]})]})};eL.propTypes={selectedMenu:s().string};let eI=e=>{let{currentAthlete:t,selectedMenu:n}=e,{t:r}=(0,c.D)(),[s,l]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef,{searchOpen:s,setSearchOpen:l}),(0,a.jsxs)("nav",{children:[!s&&(0,a.jsxs)(eN,{className:eB,selectedMenu:n,children:[(0,a.jsxs)(ej,{id:ek.DASHBOARD,children:[(0,a.jsx)(ey,{href:"/dashboard",children:r("nav.primary.dashboard")}),(0,a.jsxs)(eb,{children:[(0,a.jsx)("a",{href:"/dashboard",children:r("nav.secondary.dashboard.activity_feed")}),(0,a.jsx)("a",{href:"/clubs",children:r("nav.secondary.dashboard.clubs")}),(0,a.jsx)("a",{href:"/athlete/segments/starred",children:r("nav.secondary.dashboard.my_segments")}),(0,a.jsx)("a",{href:"/athlete/routes",children:r("nav.secondary.dashboard.my_routes")}),(0,a.jsx)("div",{className:ex().subscriptionCallout,children:r("nav.secondary.subscription")}),(0,a.jsx)("a",{href:"/athlete/goals",className:ex().summit,children:r("nav.secondary.dashboard.my_goals")})]})]}),(0,a.jsxs)(ej,{id:ek.TRAINING,children:[(0,a.jsx)(ey,{href:"/athlete/training/log",children:r("nav.primary.training")}),(0,a.jsxs)(eb,{children:[(0,a.jsx)("a",{href:"/athlete/calendar",children:r("nav.secondary.training.training_calendar")}),(0,a.jsx)("a",{href:"/athlete/training",children:r("nav.secondary.training.my_activities")}),(0,a.jsx)("div",{className:ex().subscriptionCallout,children:r("nav.secondary.subscription")}),(0,a.jsx)("a",{href:"/athletes/".concat(t.id,"/training/log"),className:ex().summit,children:r("nav.secondary.training.training_log")}),(0,a.jsx)("a",{href:"/training-plans",className:ex().summit,children:r("nav.secondary.training.training_plans")}),(0,a.jsx)("a",{href:"/athlete/analysis",className:ex().summit,children:r("nav.secondary.training.power_curve")}),(0,a.jsx)("a",{href:"/athlete/fitness",className:ex().summit,children:r("nav.secondary.training.fitness")})]})]}),(0,a.jsx)(ev,{id:ek.MAPS,href:"/maps",children:r("nav.primary.maps")}),(0,a.jsx)(ev,{id:ek.CHALLENGES,href:"/challenges",children:r("nav.primary.challenges")})]}),(0,a.jsxs)(eN,{className:"".concat(eB),children:[(0,a.jsx)(ew,{currentAthlete:t}),(0,a.jsx)(z,{appContext:{useStagingApi:!!eM.env.USE_STAGING_API}}),(0,a.jsxs)(ej,{id:"athlete-menu",children:[(0,a.jsx)(ey,{href:"/athletes/".concat(t.id),children:(0,a.jsx)(A.q,{src:t.profile_medium,type:"athlete",size:"small",name:t.firstname})}),(0,a.jsxs)(eb,{anchor:"right",children:[(0,a.jsx)("a",{href:"/athletes/".concat(t.id,"/follows?type=suggested"),className:ex().primary,children:r("nav.athlete.find_friends")}),(0,a.jsx)("a",{href:"/athletes/".concat(t.id),children:r("nav.athlete.profile")}),(0,a.jsx)("a",{href:"/settings/profile",children:r("nav.athlete.settings")}),(0,a.jsx)("a",{href:"/apps",children:r("nav.athlete.apps")}),(0,a.jsx)("a",{href:"/subscription/perks",children:r("nav.athlete.subscriber_perks")}),(0,a.jsx)("a",{href:"/logout",children:r("nav.athlete.log_out")})]})]}),(0,a.jsxs)(ej,{id:"create-menu",children:[(0,a.jsxs)(ey,{href:"/upload",icon:!1,className:ex().createButton,children:[(0,a.jsx)(Z.default,{className:ex().createButtonBase,title:r("nav.create.create")}),(0,a.jsx)(G.default,{className:ex().createButtonHover,title:r("nav.create.create")})]}),(0,a.jsxs)(eb,{anchor:"right",className:ex().createMenuItems,children:[(0,a.jsxs)("a",{href:"/upload",children:[(0,a.jsx)(X.default,{size:20}),r("nav.create.upload_activity")]}),(0,a.jsxs)("a",{href:"/upload/manual",children:[(0,a.jsx)(U.default,{size:20}),r("nav.create.manual_entry")]}),(0,a.jsxs)("a",{href:"/maps/create",children:[(0,a.jsx)(Y.default,{size:20}),r("nav.create.create_route_v2")]}),(0,a.jsxs)("a",{href:"/athletes/".concat(t.id,"/posts/new"),children:[(0,a.jsx)(Q.default,{size:20}),r("nav.create.create_post_v2")]})]})]})]})]})]})};eI.propTypes={currentAthlete:s().shape({firstname:s().string,id:s().number.isRequired,profile_medium:s().string,is_subscriber:s().bool.isRequired,is_trial_eligible:s().bool.isRequired}).isRequired,selectedMenu:s().string};let eE=new l.S,eS=e=>{let{currentAthlete:t,selectedMenu:n,hasGlobalNavSearchAccess:i=!1}=e;return t?(0,a.jsx)(o.aH,{client:eE,children:(0,a.jsx)(eI,{currentAthlete:t,selectedMenu:n,hasGlobalNavSearchAccess:i})}):(0,a.jsx)(eL,{selectedMenu:n})};eS.propTypes={currentAthlete:s().shape({}),selectedMenu:s().string,hasGlobalNavSearchAccess:s().bool};var eA=n(131791),eD=n(821108),eH=n.n(eD);let eW=e=>{let{currentAthlete:t,selectedMenu:n,variant:i="default"}=e,r=eH().container;return"fluid"===i?r=eH().containerFluid:("simple"===i||"simpleFixed"===i)&&(r=eH().containerSimple),(0,a.jsx)("header",{id:"global-header",className:(0,d.W)(eH().globalHeader,"simpleFixed"===i&&eH().fixed),children:(0,a.jsxs)("div",{className:r,children:[(0,a.jsx)("a",{href:"/",children:(0,a.jsx)(eA.$,{alt:"Strava",width:95,height:20})}),"simple"!==i&&"simpleFixed"!==i&&(0,a.jsx)(eS,{currentAthlete:t,selectedMenu:n})]})})};eW.propTypes={currentAthlete:s().shape({}),selectedMenu:s().string,variant:s().oneOf(["default","fluid","simple","simpleFixed"])}},352194:function(e){e.exports={closeButton:"EmailVerificationModal_closeButton__U7n6I",modalBody:"EmailVerificationModal_modalBody__Lo3Ef",confirmEmailIcon:"EmailVerificationModal_confirmEmailIcon__62Fjh",emailText:"EmailVerificationModal_emailText___E0KR"}},271866:function(e){e.exports={avatar:"Avatar_avatar__pIUtQ",imgWrapper:"Avatar_imgWrapper__FoCtT",badge:"Avatar_badge__mrH2k",athlete:"Avatar_athlete___Ysb8",xsmall:"Avatar_xsmall__AdbJW",small:"Avatar_small__8J6Gi",large:"Avatar_large__Q51IP",xlarge:"Avatar_xlarge__2c_uR",club:"Avatar_club__ULVYu",default:"Avatar_default__DNP8u"}},805431:function(e){e.exports={btn:"Button_btn__EdK33",default:"Button_default__JSqPI",primary:"Button_primary___8ywh",primaryOutline:"Button_primaryOutline__FsWzb",secondary:"Button_secondary__N_XMn",icon:"Button_icon__HDGEw",text:"Button_text__d_3rf",info:"Button_info__MaNWW",danger:"Button_danger__Cw9rY",link:"Button_link__8qMwp"}},464307:function(e){e.exports={btn:"Dropdown_btn__e2tzk",icon:"Dropdown_icon__z6rY8",list:"Dropdown_list__lJGU6",item:"Dropdown_item__4qn56"}},41761:function(e){e.exports={overlay:"Modal_overlay__FcI_u",dialog:"Modal_dialog__Kk2bo",closeButton:"Modal_closeButton__vc3WF",title:"Modal_title__ZYLgm",heroImage:"Modal_heroImage__4NqNT",body:"Modal_body__1S4MY",actions:"Modal_actions__C899X"}},691686:function(e){e.exports={select:"Select_select__QiZGT"}},649076:function(e){e.exports={spinner:"Spinner_spinner__pA5dm",graphic:"Spinner_graphic__FjV8E",spin:"Spinner_spin__oBXNQ"}},855747:function(e){e.exports={notificationsMenu:"Notifications_notificationsMenu__MlTl6",notificationsButton:"Notifications_notificationsButton__cutco",notificationsIcon:"Notifications_notificationsIcon__e0A1L",open:"Notifications_open__g74W5",notificationsCount:"Notifications_notificationsCount__kRzk4",navBarButton:"Notifications_navBarButton__DBxCJ",active:"Notifications_active__svuS1",icon:"Notifications_icon__M9ZDq"}},189290:function(e){e.exports={notificationContent:"NotificationContent_notificationContent__0KZqn",notificationAvatar:"NotificationContent_notificationAvatar__uMIe2",textContainer:"NotificationContent_textContainer__zjV9X",notificationTitle:"NotificationContent_notificationTitle__7HIs3",displayDate:"NotificationContent_displayDate__2fZWn"}},975344:function(e){e.exports={notifications:"NotificationsList_notifications__4Fo8H",notificationsEmpty:"NotificationsList_notificationsEmpty__z1ty_",notificationUnread:"NotificationsList_notificationUnread__q5LNq"}},821108:function(e){e.exports={globalHeader:"GlobalHeader_globalHeader__NxDNZ",fixed:"GlobalHeader_fixed__rt1_v",branding:"GlobalHeader_branding__bG8cP",container:"GlobalHeader_container__N7jlr",containerFluid:"GlobalHeader_containerFluid__LahDm",containerSimple:"GlobalHeader_containerSimple__nbSWP"}},618748:function(e){e.exports={searchIcon:"Search_searchIcon__G_dcV",searchWrapper:"Search_searchWrapper__HHtV1",entityDropdown:"Search_entityDropdown__u_nv9",searchInput:"Search_searchInput__mLIHh",searchOption:"Search_searchOption__1vZA0",multiline:"Search_multiline__d7I4_",subtitle:"Search_subtitle__5qf_2"}},747726:function(e){e.exports={nav:"styles_nav__VC8vO",loggedout:"styles_loggedout__MNMCM",linkButton:"styles_linkButton__Zl9rZ",linkButtons:"styles_linkButtons__CE_F1",giftBtn:"styles_giftBtn__b8O8V",subscribeBtn:"styles_subscribeBtn__yUh7x",hide:"styles_hide__silPG",primary:"styles_primary__5ZyQH",summit:"styles_summit__PgHd8",selected:"styles_selected__5OPsp",navItem:"styles_navItem__0mE5x",button:"styles_button__0P3_w",create:"styles_create__gvRRX",navGroup:"styles_navGroup__vqYfX",icon:"styles_icon__2Fj5H",menu:"styles_menu____5De",createButtonBase:"styles_createButtonBase__VRRe8",createButtonHover:"styles_createButtonHover__Ul6af",menuItems:"styles_menuItems__S3O0T",enterMenu:"styles_enterMenu__awqoa",right:"styles_right__bjDAB",subscriptionCallout:"styles_subscriptionCallout__ixh0Z",createButton:"styles_createButton__cjOec",createMenuItems:"styles_createMenuItems__CVMJX"}},982405:function(){}}]);