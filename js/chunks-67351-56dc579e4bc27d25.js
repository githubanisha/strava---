(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67351],{477612:function(e,t,n){"use strict";n.d(t,{gY:function(){return u},rh:function(){return c},VD:function(){return o},Vr:function(){return _},th:function(){return d},wO:function(){return h}});var a=n(823916),r=n(160875),i=n(393786),s=n(612953),l=n(361043);let o=async()=>(function e(t,n){return Array.isArray(t)?t.map(t=>e(t)):(0,s.Z)(t)?Object.keys(t).reduce((a,r)=>{let l=(0,i.Z)(r),o=t[r];return!n&&(0,s.Z)(o)?a[l]=e(o):!n&&Array.isArray(o)?a[l]=o.map(t=>e(t)):a[l]=o,a},{}):t})((await (0,l.default)().get("/frontend/athletes/current")).data.currentAthlete),c=e=>{let{followerId:t,followingId:n,logError:i}=e;return new Promise((e,s)=>{(0,l.default)().post("/athletes/".concat(t,"/follows"),{follow:{follower_id:t,following_id:n}}).then(t=>{if((null==t?void 0:t.status)===a.j.ok){let{data:n}=t;n.approved?e(r.I.following):e(r.I.pending)}else e(r.I.error),i(null==t?void 0:t.error)}).catch(e=>{i(e),s(r.I.error)})})},d=e=>{let{followerId:t,followingId:n,logError:r}=e;return new Promise((e,i)=>{(0,l.default)().delete("/athletes/".concat(t,"/follows/").concat(n),{headers:{Accept:"text/javascript"},data:{follow:{follower_id:t,following_id:n}}}).then(t=>{(null==t?void 0:t.status)===a.j.noContent?e(!0):(r(t),e(!1))}).catch(e=>{r(e),i(e)})})},u=async e=>{let{entity:t,entityId:n,surfaceType:a}=e,r="/athlete/mentionable_entities",i=new URLSearchParams;t&&n&&(i.append("parent_type",t),i.append("parent_id",n)),a&&i.append("surface_type",a);let s=i.toString();return s&&(r+="?".concat(s)),(0,l.default)().get(r)},h=e=>{let{settings:t,logError:n}=e;return new Promise((e,a)=>{(0,l.default)().put("/athlete_settings",{settings:t}).then(t=>{(null==t?void 0:t.error)&&n(t.error),e(t)}).catch(e=>{n(e),a(e)})})},_=e=>{let{logError:t}=e;return new Promise(e=>{(0,l.default)().get("/athlete_settings/data_sharing").then(n=>{(null==n?void 0:n.error)&&t(n.error),e(n)}).catch(n=>{t(n),e(n)})})}},160875:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});let a=Object.freeze({following:"following",pending:"pending",error:"error",canFollow:"can_follow",canRequest:"can_request"});Object.freeze({add:"add",followRequested:"follow_requested",following:"following",requestToFollow:"request_to_follow",follow:"follow"})},823916:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});let a=Object.freeze({continue:100,switchingProtocols:101,processing:102,ok:200,created:201,accepted:202,nonAuthoritativeInformation:203,noContent:204,resetContent:205,partialContent:206,multiStatus:207,multipleChoices:300,movedPermanently:301,movedTemporarily:302,seeOther:303,notModified:304,useProxy:305,temporaryRedirect:307,permanentRedirect:308,badRequest:400,unauthorized:401,paymentRequired:402,forbidden:403,notFound:404,methodNotAllowed:405,notAcceptable:406,proxyAuthenticationRequired:407,requestTimeout:408,conflict:409,gone:410,lengthRequired:411,preconditionFailed:412,requestTooLong:413,requestUriTooLong:414,unsupportedMediaType:415,requestedRangeNotSatisfiable:416,expectationFailed:417,imATeapot:418,insufficientSpaceOnResource:419,methodFailure:420,misdirectedRequest:421,unprocessableEntity:422,locked:423,failedDependency:424,preconditionRequired:428,tooManyRequests:429,requestHeaderFieldsTooLarge:431,unavailableForLegalReasons:451,internalServerError:500,notImplemented:501,badGateway:502,serviceUnavailable:503,gatewayTimeout:504,httpVersionNotSupported:505,insufficientStorage:507,networkAuthenticationRequired:511})},875193:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var a=n(667294);let r=e=>{let t=(0,a.useRef)(!1),[n,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),[n,(0,a.useCallback)(e=>t.current?r(e):()=>{},[])]}},356111:function(e,t,n){"use strict";n.d(t,{q:function(){return p}});var a=n(785893),r=n(667294),i=n(840489),s=n(630442),l=n(748281),o=n(617421),c=n(903719),d=n(875193),u=n(271866),h=n.n(u);let _=e=>{let{src:t,alt:n,title:i,fallback:s=null}=e,[l,o]=(0,d.F)((0,a.jsx)("img",{src:t,alt:n,title:i}));return(0,r.useEffect)(()=>{let e=new Image;return e.onload=()=>{o((0,a.jsx)("img",{src:t,alt:n,title:i}))},e.onerror=()=>{o(s)},e.src=t,()=>{e=null}},[t,n,i,s,o]),(0,a.jsx)(a.Fragment,{children:l})},f=e=>"href"in e,p=e=>{let{name:t="",alt:n="",title:r,type:d,src:u,size:p,badge:m,className:x,...g}=e,v=(0,i.W)([h().avatar,h()[d],x,p&&h()[p]]),j=(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)("div",{className:h().badge,children:function(e){switch(e){case"ambassador":case"pro":return(0,a.jsx)(s.default,{});case"employee":case"subscriber":case"premium":return(0,a.jsx)(l.default,{});case"verified":return(0,a.jsx)(o.default,{});default:return null}}(m)}),(0,a.jsx)("div",{className:h().imgWrapper,children:(0,a.jsx)(_,{src:u,alt:n,title:r||t,fallback:"athlete"===d?(0,a.jsx)(c.default,{}):null})})]});return f(g)?(0,a.jsx)("a",{className:v,"data-testid":"avatar-wrapper",...g,children:j}):(0,a.jsx)("div",{className:v,"data-testid":"avatar-wrapper",...g,children:j})}},816156:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var a=n(785893),r=n(667294),i=n(840489),s=n(805431),l=n.n(s);let o=r.forwardRef((e,t)=>{let{children:n,className:r,variant:s="default",...o}=e;return(0,a.jsx)("button",{className:(0,i.W)(l().btn,l()[s],r),ref:t,...o,children:n})})},412672:function(e,t,n){"use strict";n.d(t,{zx:function(){return a.z},Qj:function(){return c}});var a=n(816156),r=n(785893),i=n(667294),s=n(840489),l=n(805431),o=n.n(l);let c=(0,i.forwardRef)((e,t)=>{let{href:n,children:a,className:i,variant:l="default",...c}=e;return(0,r.jsx)("a",{ref:t,href:n,className:(0,s.W)(o().btn,o()[l],i),...c,children:a})})},922056:function(e,t,n){"use strict";n.d(t,{Lt:function(){return g},PS:function(){return h},Vs:function(){return p},_2:function(){return m},f9:function(){return f},hP:function(){return x},h_:function(){return u}});var a=n(785893);n(667294);var r=n(840489),i=n(314155),s=n(377079);n(136216);var l=n(805431),o=n.n(l),c=n(464307),d=n.n(c);function u(e){let{children:t,...n}=e;return(0,a.jsx)(i.v2,{...n,children:t})}function h(e){let{className:t,children:n,onClick:s,...l}=e;return(0,a.jsx)(i.j2,{className:(0,r.W)(o().btn,o().default,d().btn,t),onClick:s,...l,children:n})}function _(e){let{className:t,children:n,...s}=e;return(0,a.jsx)(i.qy,{className:(0,r.W)(d().list,t),...s,children:n})}function f(e){let{className:t,children:n,portal:s,...l}=e;return(0,a.jsx)(i.YI,{className:(0,r.W)(d().list,t),portal:s,...l,children:n})}function p(e){let{className:t,children:n,...s}=e;return(0,a.jsx)(i.sd,{className:(0,r.W)(d().list,t),...s,children:n})}i.v2.displayName="DropdownMenu",i.j2.displayName="DropdownButton",i.qy.displayName="DropdownList",i.v2.displayName="DropdownPopover",i.sd.displayName="DropdownItems";let m=e=>{let{as:t,href:n,children:s,className:l,...o}=e;return(0,a.jsx)(i.Uk,{as:t,className:(0,r.W)(d().item,l),href:n,...o,children:s})};function x(e){let{as:t,onSelect:n,children:s,className:l,...o}=e;return(0,a.jsx)(i.sN,{as:t,className:(0,r.W)(d().item,l),onSelect:n,...o,children:s})}function g(e){let{text:t,children:n,onClick:r=()=>{},className:i,buttonClassName:l,...o}=e;return(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:l||i,onClick:r,...o,children:[t,(0,a.jsx)(s.default,{className:d().icon})]}),(0,a.jsx)(_,{className:i,portal:!1,hidden:!1,children:n})]})}i.Uk.displayName="DropdownLink",i.sN.displayName="DropdownItem"},581932:function(e,t,n){"use strict";n.d(t,{ZA:function(){return h},fe:function(){return x},fj:function(){return m},hz:function(){return _},nK:function(){return p},ol:function(){return g},r6:function(){return f},u_:function(){return v}});var a=n(785893),r=n(667294),i=n(840489),s=n(980512),l=n(898194),o=n(797944),c=n(816156);n(982405);var d=n(41761),u=n.n(d);let h=r.forwardRef((e,t)=>{let{className:n,children:r,...l}=e;return(0,a.jsx)(s.t9,{ref:t,className:(0,i.W)(u().overlay,n),...l,children:r})}),_=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)(s.cZ,{className:(0,i.W)(u().dialog,t),...r,children:n})},f=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)("h2",{className:(0,i.W)(u().title,t),...r,children:n})},p=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)("div",{className:(0,i.W)(u().actions,t),...r,children:n})},m=e=>{let{className:t,src:n,alt:r,...s}=e;return(0,a.jsx)("img",{src:n,alt:r,className:(0,i.W)(u().heroImage,t),...s})},x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.W)(u().body,t),...n})},g=e=>{let{className:t,color:n,...r}=e;return(0,a.jsx)(c.z,{type:"button",variant:"icon",className:t,...r,children:(0,a.jsx)(l.default,{fill:null!=n?n:o.jz})})},v=e=>{let{className:t,isOpen:n=!1,onDismiss:r,hasClose:i,children:s,initialFocusRef:l,...o}=e;return(0,a.jsx)(h,{isOpen:n,onDismiss:r,initialFocusRef:l,children:(0,a.jsxs)(_,{className:t,...o,children:[i&&(0,a.jsx)(g,{className:u().closeButton,onClick:r,"data-testid":"modal-close-button"}),s]})})};v.Overlay=h,v.Content=_,v.Title=f,v.Actions=p,v.HeroImage=m,v.Body=x,v.CloseButton=g},170243:function(e,t,n){"use strict";n.d(t,{Ph:function(){return m}});var a=n(785893),r=n(667294),i=n(931776),s=n(183450),l=n(609161),o=n(840489),c=n(797944),d=n(236363),u=n(938690),h=n(691686),_=n.n(h);let f={container:e=>({...e,borderColor:c.x6}),control:e=>({...e,background:c.i4,border:"1px solid ".concat(c.l5),borderRadius:d.NC,boxShadow:"",boxSizing:"border-box",minHeight:"40px",flexWrap:"nowrap","&:hover":{borderColor:c.FR}}),indicatorSeparator:()=>({display:"none"}),dropdownIndicator:e=>({...e,color:c.x6}),menu:e=>({...e,marginTop:0,zIndex:999}),menuList:e=>({...e,padding:0}),multiValue:e=>({...e,backgroundColor:c.Ro,flexShrink:0}),multiValueLabel:e=>({...e,color:c.tK,fontSize:u.gN,lineHeight:u.GP}),multiValueRemove:e=>({...e,"&:hover":{backgroundColor:c.l5,color:c.jz},svg:{height:"16px",width:"16px"}}),option:(e,t)=>({...e,alignItems:"center",display:"flex",backgroundColor:(null==t?void 0:t.isFocused)?c.IC:(null==t?void 0:t.isSelected)?c.IC:c.i4,color:"inherit",fontSize:u.gN,lineHeight:u.GP,padding:"".concat(d.PC," ").concat(d.L3),"&:active":{backgroundColor:c.IC}}),valueContainer:e=>({...e,flexWrap:"wrap"}),placeholder:e=>({...e,color:c.DT}),singleValue:e=>({...e})},p=(e,t)=>Object.fromEntries(Object.entries(e).map(e=>{let[n,a]=e;return[n,(e,r)=>{var i;let{override:s,...l}=a(e,r);return{...!s&&e,...l,...t&&n in t&&(null===(i=t[n])||void 0===i?void 0:i.call(t,l,r))}}]})),m=(0,r.forwardRef)((e,t)=>{var n;let{className:r,components:c={},styles:d={},...u}=e,h=p(f,d),m=u.creatable?l.Z:i.ZP;return(0,a.jsx)(m,{...u,components:{...s.c,...c,Menu:u.hideMenu?()=>null:null!==(n=c.Menu)&&void 0!==n?n:s.c.Menu},className:(0,o.W)(_().select,r),styles:h,ref:t})})},93587:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var a=n(785893);n(667294);var r=n(840489),i=n(649076),s=n.n(i);let l=e=>{let{className:t,color:n="default",size:i=20,dataTestId:l="loading",...o}=e;return(0,a.jsx)("span",{className:(0,r.W)(s().spinner,t),"data-testid":l,...o,children:(0,a.jsx)("span",{className:(0,r.W)(s().graphic,n),style:{width:"".concat(i,"px"),height:"".concat(i,"px")}})})}},131791:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var a=n(785893);n(667294);var r=n(840489),i=n(797944);let s=e=>{let{className:t,id:n="stravalogo",alt:s="Strava",width:l="auto",height:o="auto",fill:c=i.uB,style:d,...u}=e;return(0,a.jsxs)("svg",{role:"img",viewBox:"0 0 485 95","aria-labelledby":n,className:(0,r.W)(t),xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:l,height:o,...d},...u,children:[(0,a.jsx)("title",{id:n,children:s}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M258.505 90.4524L258.502 90.4484H284.108L299.838 58.8214L315.567 90.4484H346.682L299.835 -0.000610352L255.366 85.8686L238.292 60.9384C248.834 55.8544 255.405 47.0494 255.405 34.4014V34.1524C255.405 25.2254 252.678 18.7764 247.469 13.5674C241.392 7.49139 231.596 3.64739 216.22 3.64739H173.809V90.4524H202.827V65.6504H209.027L225.396 90.4524H258.505ZM437.447 -0.000610352L390.606 90.4484H421.721L437.45 58.8214L453.18 90.4484H484.294L437.447 -0.000610352ZM368.669 94.0074L415.51 3.55839H384.396L368.666 35.1854L352.936 3.55839H321.822L368.669 94.0074ZM215.352 44.9414C222.295 44.9414 226.512 41.8414 226.512 36.5094V36.2604C226.512 30.6804 222.171 27.9524 215.476 27.9524H202.827V44.9414H215.352ZM111.753 28.2004H86.2089V3.64739H166.316V28.2004H140.772V90.4524H111.753V28.2004ZM15.5019 58.9544L-9.15527e-05 77.4314C11.0369 87.1054 26.9099 92.0644 44.5179 92.0644C67.8319 92.0644 82.8369 80.9034 82.8369 62.6734V62.4264C82.8369 44.9414 67.9559 38.4924 45.7589 34.4014C36.5819 32.6634 34.2259 31.1774 34.2259 28.8204V28.5724C34.2259 26.4644 36.2109 24.9764 40.5499 24.9764C48.6099 24.9764 58.4079 27.5804 66.5909 33.5324L80.7289 13.9404C70.6839 6.00339 58.2839 2.03439 41.5429 2.03439C17.6079 2.03439 4.71191 14.8084 4.71191 31.3004V31.5494C4.71191 49.9014 21.8259 55.4834 41.2939 59.4494C50.5949 61.3104 53.3219 62.6734 53.3219 65.1544V65.4034C53.3219 67.7584 51.0909 69.1214 45.8819 69.1214C35.7139 69.1214 24.9259 66.1474 15.5019 58.9544Z",fill:c})]})}},28341:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},q:function(){return r}});var a=n(615750);function r(e){let t=new Date;t.setTime(t.getTime()+15768e7),document.cookie="ui_language= ; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="ui_language=".concat(e,"; expires=").concat(t,"; path=/"),window.location.reload()}let i=e=>{var t;let n=(null==e?void 0:e.length)===2?(null===(t=a.XG[e])||void 0===t?void 0:t[0])||a.MV.enUS:e;return Object.values(a.MV).includes(n)?n:a.MV.enUS}},502086:function(e,t,n){"use strict";n.d(t,{T:function(){return g}});var a=n(785893);n(667294);var r=n(213980),i=n.n(r),s=n(693197),l=n(925916),o=n(339572),c=n(922056),d=n(28341),u=n(878486),h=n.n(u);function _(e){return void 0!==o.supportedLanguages[e]?o.supportedLanguages[e]:e}let f=()=>{let{getLanguage:e}=(0,s.D)(),t=e();return(0,a.jsx)("div",{className:h().dropdown,"data-qa":"LanguagePicker",children:(0,a.jsx)(c.Lt,{text:_(t),children:o.languagePickerLanguages.map(e=>(0,a.jsx)(c.hP,{onSelect:()=>(0,d.q)(e),children:_(e)},e))})})};var p=n.p+"static/media/strava-logo.962ce37b.svg",m=n(3587),x=n.n(m);let g=e=>{let{currentAthlete:t}=e,{t:n}=(0,s.D)();return(0,a.jsx)("footer",{className:x().globalFooter,children:(0,a.jsxs)("div",{className:"".concat(x().grid," ").concat(x().container),children:[(0,a.jsxs)("div",{className:x().branding,children:[(0,a.jsx)("h3",{children:(0,a.jsx)("a",{href:"/",children:(0,a.jsx)("img",{src:p,alt:"Strava",height:24,width:114})})}),(0,a.jsxs)("div",{className:x().copyright,children:["\xa9 ",new Date().getFullYear()," Strava"]})]}),(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:n("global_footer.about")}),(0,a.jsxs)("ul",{className:x().navList,children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/about",children:n("global_footer.about")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/features",children:n("global_footer.features")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/mobile",children:n("global_footer.mobile")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/premium?source=global_footer",children:n("global_footer.subscription")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/family?origin=global_footer",children:n("global_footer.family_plan")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/student?origin=global_footer",children:n("global_footer.student_discount")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/subscribe#discount-plans?origin=dashboard_footer",children:n("global_footer.discount_programs")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/gift?origin=global_footer",children:n("global_footer.gifting")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/legal/privacy",children:n("global_footer.privacy_policy")})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.O,{isLoggedIn:!!t,className:x().cpraComplianceCta,i18nPrefix:"legal"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/legal/terms",children:n("global_footer.terms")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://strava.zendesk.com/entries/46363890-About-Strava-Maps",children:n("global_footer.about_our_maps")})})]})]}),(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:n("global_footer.explore")}),(0,a.jsx)("ul",{className:x().navList,children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/routes/hiking/usa",children:n("global_footer.routes")})})})]}),(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:n("global_footer.follow")}),(0,a.jsxs)("ul",{className:x().navList,children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://www.facebook.com/strava",children:n("global_footer.facebook")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://twitter.com/strava",children:n("global_footer.twitter")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://instagram.com/strava",children:n("global_footer.instagram")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://www.youtube.com/stravainc",children:n("global_footer.youtube")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://www.linkedin.com/company/strava-inc./",children:n("global_footer.linkedin")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://stories.strava.com/",children:n("global_footer.stories")})})]})]}),(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:n("global_footer.help")}),(0,a.jsx)("ul",{className:x().navList,children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://strava.zendesk.com/home",children:n("global_footer.support")})})})]}),(0,a.jsxs)("nav",{children:[(0,a.jsx)("h4",{children:n("global_footer.more")}),(0,a.jsxs)("ul",{className:x().navList,children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/careers",children:n("global_footer.careers")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://press.strava.com",children:n("global_footer.press")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://partners.strava.com/business?utm_source=footer&utm_medium=referral",children:n("global_footer.business")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://partners.strava.com/",children:n("global_footer.partner_center")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/developers",children:n("global_footer.developers")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://labs.strava.com/",children:n("global_footer.labs")})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/community-standards",children:n("global_footer.strava_community_standards")})}),(0,a.jsx)("li",{children:(0,a.jsx)(f,{})})]})]})]})})};g.propTypes={currentAthlete:i().shape({})}},559630:function(e,t,n){"use strict";n.d(t,{e2:function(){return eD}});var a=n(785893),r=n(667294),i=n(213980),s=n.n(i),l=n(444347),o=n(854630),c=n(693197),d=n(840489),u=n(799022),h=n(503753),_=n(361043);let f=function(){let{shouldResendOnMount:e=!1,logError:t=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),l=()=>{i||(s(!0),(0,_.default)({options:{headers:{accept:"application/json, text/plain, */*"}}}).post("/athlete/resend_email").then(()=>{a(!0),s(!1)}).catch(e=>{t(e),s(!1)}))};return(0,r.useEffect)(()=>{e&&l()},[]),{resendEmail:l,closeModal:()=>{a(!1)},isModalOpen:n,isResendEmailInProgress:i}};var p=n(600612),m=n(581932),x=n(352194),g=n.n(x);let v="microfrontends.email_verification",j=e=>{let{isModalOpen:t,closeModal:n,optionalExplanation:r="",email:i}=e,{t:s}=(0,c.D)();return(0,a.jsxs)(m.u_,{isOpen:t,onDismiss:n,"aria-label":s("".concat(v,".headline")),children:[(0,a.jsx)(m.ol,{title:s("".concat(v,".close_modal")),onClick:n,className:g().closeButton}),(0,a.jsxs)(m.fe,{className:g().modalBody,children:[(0,a.jsx)("div",{className:g().confirmEmailIcon}),(0,a.jsx)("h2",{children:s("".concat(v,".headline"))}),r&&(0,a.jsx)("p",{children:r}),(0,a.jsx)("p",{"data-testid":"email-resent-text",children:(0,a.jsx)(p.Lu,{noWrap:!0,content:s("".concat(v,".prompt_html"),{pending_email:i,class_name:g().emailText})})}),(0,a.jsx)("hr",{}),(0,a.jsx)("small",{children:(0,a.jsx)(p.Lu,{noWrap:!0,content:s("".concat(v,".wrong_email_html"),{email_settings_path:"/settings/email_change"})})})]})]})};var b=n(299939),y=n(398656),N=n(875193);async function w(e){let{logError:t,useStagingApi:n,currentLanguage:a}=e;try{let{data:e}=await (0,_.default)({useStagingApi:n,currentLanguage:a}).get("/frontend/athlete/notifications");return{notifications:e}}catch(e){return t(e),{notifications:[]}}}async function C(e){let{logError:t,useStagingApi:n,currentLanguage:a}=e;try{let{data:e}=await (0,_.default)({useStagingApi:n,currentLanguage:a}).post("/frontend/athlete/notifications/mark_all_read");return{notifications:e}}catch(e){return t(e),{notifications:[]}}}async function k(e){let{logError:t,useStagingApi:n}=e;try{let{data:e}=await (0,_.default)({useStagingApi:n}).get("/frontend/athlete/notifications/num_new_notifications");return{count:e}}catch(e){return t(e),{count:0}}}var L=n(93587);let M=(0,r.createContext)(void 0);M.displayName="NotificationsContext";let A=()=>{let e=(0,r.useContext)(M);if(!e)throw Error("useNotificationsContext must be used within the NotificationsContext.Provider");return e},S=e=>{let{children:t,notification:n,trackNotifClick:i}=e,{email:s}=n.props,{state:l,dispatch:o}=A(),{resendEmail:c,isResendEmailInProgress:d}=l;return(0,r.useEffect)(()=>{""===l.email&&o({type:"UPDATE_EMAIL_VERIF_MODAL_EMAIL",payload:{email:s}})},[o,s,l.email]),(0,a.jsx)("button",{id:"email-verif-btn",onClick:()=>{i(),c()},disabled:d,children:t})},B=e=>{let{children:t,notification:n,trackNotifClick:r}=e;return(0,a.jsx)("a",{href:n.actionable_link,onClick:r,children:t},n.id)},I=e=>{let{children:t,notification:n}=e;return(0,a.jsx)("div",{children:t},n.id)};var R=n(356111),E=n(189290),F=n.n(E);let D=e=>{let{notification:t}=e;return(0,a.jsxs)("div",{className:F().notificationContent,children:[(0,a.jsx)("div",{className:F().notificationAvatar,children:(0,a.jsx)(R.q,{src:t.icon,type:"athlete",size:"small",title:"",name:""})}),(0,a.jsxs)("div",{className:F().textContainer,children:[t.title&&(0,a.jsx)("p",{className:F().notificationTitle,children:t.title}),(0,a.jsx)(p.Lu,{tagName:"p",noHtml:!0,content:t.text}),(0,a.jsx)("p",{className:F().displayDate,children:t.display_date})]})]})};var O=n(975344),q=n.n(O);let T=e=>"verify_email_prompt"===e.category?S:"javascript://"===e.actionable_link?I:B,P=e=>{let{notifications:t,isLoading:n=!1}=e,{t:i}=(0,c.D)(),{track:s}=(0,h.O)(),l=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{l.current&&(s({category:"notification",page:"pull_notification",action:"screen_enter",element:"pull_notification_list"}),l.current=!1);let e=()=>{s({category:"notification",page:"pull_notification",action:"screen_exit",element:"pull_notification_list"})};return window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("beforeunload",e)}},[s]),(0,a.jsxs)("ul",{className:q().notifications,id:"notifications-list","aria-labelledby":"notifications","data-cy":"notifications-list",children:[0===t.length&&(0,a.jsxs)("li",{className:q().notificationsEmpty,children:[n&&(0,a.jsx)(L.$,{}),!n&&(0,a.jsx)("p",{children:i("microfrontends.notifications.no_notifications")})]}),t.length>0&&t.map(e=>{let t=T(e);return(0,a.jsx)("li",{className:(0,d.W)(!e.read&&q().notificationUnread),children:(0,a.jsx)(t,{notification:e,trackNotifClick:()=>{s({category:"notification",page:"pull_notification",action:"click",element:e.category.replace(/-/g,"_"),properties:{notification_id:e.id,category:e.category,destination:e.actionable_link||""}})},children:(0,a.jsx)(D,{notification:e})},e.id)},e.id)})]})},H=(e,t)=>{if("UPDATE_EMAIL_VERIF_MODAL_EMAIL"===t.type){let{email:n}=t.payload;return{...e,email:n}}};var W=n(855747),V=n.n(W);let z=e=>{let{appContext:t}=e,{useStagingApi:n=!1}=t,{logError:i}=(0,u.D)(),{t:s,getLanguage:l}=(0,c.D)(),o=l(),_=(0,r.useMemo)(()=>({useStagingApi:n,logError:i,currentLanguage:o}),[i,n,o]),{track:p}=(0,h.O)(),m=(0,r.useRef)(null),x=(0,r.useRef)(null),[g,v]=(0,N.F)([]),[L,A]=(0,N.F)(0),[S,B]=(0,N.F)(!1),[I,R]=(0,N.F)(!1),[E,F]=(0,N.F)(!1),{resendEmail:D,closeModal:O,isModalOpen:q,isResendEmailInProgress:T}=f({logError:i}),[W,z]=(0,r.useReducer)(H,{isResendEmailInProgress:T,resendEmail:D,email:""}),G=(0,r.useMemo)(()=>({state:W,dispatch:z}),[W]),Z=(()=>{let e="microfrontends.notifications.new_notifications_title",t=s(e,{count:L});return t.match(e)?s(e+=1===L?".one":".other",{count:L}):t})();(0,r.useEffect)(()=>{R(!0),(async()=>{let{count:e}=await k(_);A(e),R(!1)})()},[_,R,A]),(0,r.useEffect)(()=>{let e=new Event("notificationsReady");document.dispatchEvent(e)},[]);let U=e=>{var t;(null==m?void 0:null===(t=m.current)||void 0===t?void 0:t.contains(e.target))||X()},Y=e=>{"Escape"===e.key&&X()},Q=async()=>{B(!0),document.addEventListener("mousedown",U),document.addEventListener("keydown",Y),p({category:"notification",page:"pull_notification",action:"click",element:"bell"}),E||(R(!0),w(_).then(e=>{let{notifications:t}=e;v(t),R(!1),F(!0),L>0&&C(_)}))},X=()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",Y),L>0&&(A(0),v(e=>e.map(e=>({...e,read:!0})))),B(!1)};return(0,r.useEffect)(()=>{q&&B(!1)},[q,B]),(0,a.jsx)(M.Provider,{value:G,children:(0,a.jsxs)("div",{ref:m,className:V().notificationsMenu,children:[(0,a.jsxs)("button",{ref:x,title:Z,className:(0,d.W)(V().navBarButton,V().notificationsButton),onClick:S?X:Q,"aria-expanded":S,"aria-controls":"notifications-list","data-cy":"notifications-bell",children:[S?(0,a.jsx)(b.default,{className:(0,d.W)(V().notificationsIcon,V().open)}):(0,a.jsx)(y.default,{className:V().notificationsIcon}),L>0&&(0,a.jsx)("div",{"data-testid":"unread-ball",className:V().notificationsCount,"aria-hidden":!0,children:L<10?L:"9+"})]}),S&&(0,a.jsx)(P,{notifications:g,isLoading:I}),q&&(0,a.jsx)(j,{isModalOpen:q,closeModal:O,email:W.email})]})})};var G=n(723439),Z=n(693417),U=n(681030),Y=n(377876),Q=n(691876),X=n(65592),J=n(412672),K=n(898194),$=n(822815),ee=n(922056),et=n(170243),en=n(236363),ea=n(938690),er=n(797944);let ei={control:e=>({...e,height:42}),menu:e=>({...e,width:350}),option:e=>({...e,padding:"".concat(en.XG," ").concat(en.PC),fontSize:ea.uh,"&:first-of-type":{backgroundColor:er.Ro,fontSize:ea.uP}})},es={activities:"activities/recent",athletes:"following",clubs:"clubs",segments:"segments"},el={activities:"/athlete/training",athletes:"/athletes/search",clubs:"/clubs/search",segments:"/segments/search"},eo=(e,t)=>{let n=new URLSearchParams,a="".concat(el[e]);switch(e){case"activities":case"segments":n.append("keywords",t);break;default:n.append("text",t)}return"".concat(a,"?").concat(n.toString())};var ec=n(618748),ed=n.n(ec);let eu=e=>{let{name:t,id:n,searchEntity:r,__isNew__:i=!1,...s}=e,{t:l}=(0,c.D)(),o="/".concat(r,"/").concat(n);return i?s.label:t&&n&&r?(0,a.jsx)("a",{href:o,className:ed().searchOption,children:(()=>{if("segments"===r){let{city:e,state:n,country:r}=s,i=[e,n,r].filter(Boolean).join(l("nav.search.segment_location_separator"));return(0,a.jsxs)("div",{className:ed().multiline,children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{className:ed().subtitle,children:i})]})}return"athletes"===r||"clubs"===r?(0,a.jsxs)(a.Fragment,{children:[s.picture&&(0,a.jsx)(R.q,{src:s.picture,size:"small",type:"athletes"===r?"athlete":"club"}),(0,a.jsx)("span",{children:t})]}):(0,a.jsx)("span",{children:t})})()}):null};eu.propTypes={searchEntity:s().string,name:s().string,id:s().number,__isNew__:s().bool,picture:s().string,country:s().string,state:s().string,city:s().string};var eh=n(730530);let e_=(e,t)=>{let{data:n}=(0,eh.a)({queryKey:["search",e],queryFn:async()=>{let{data:t}=await (0,_.default)().get("/athlete/".concat(es[e]));return t},enabled:t,staleTime:3e5});return n},ef=e=>{let{searchOpen:t,setSearchOpen:n}=e,{track:i}=(0,h.O)(),{t:s}=(0,c.D)(),l=(0,r.useRef)(null),o=(0,r.useRef)(null),[d,u]=(0,r.useState)("athletes"),[_,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),x=e_(d,t);if((0,r.useEffect)(()=>{if(!t)return()=>{};let e=e=>{var t;(null===(t=o.current)||void 0===t?void 0:t.contains(e.target))||n(!1)},a=e=>{"Escape"===e.key&&n(!1)};return document.addEventListener("mouseup",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("keydown",a)}},[n,t]),!t)return(0,a.jsx)(J.zx,{variant:"icon",onClick:()=>{i({category:"search",page:"search",action:"click"}),n(!0)},className:ed().searchIcon,children:(0,a.jsx)($.default,{})});let g=e=>{"string"==typeof e?(f({label:e,value:e}),i({category:"search",page:"search",action:"execute_search",properties:{search_type:d,search_text:e}}),window.location.href=eo(d,e)):(f({label:e.label,value:e.id}),i({category:"search",page:"search",action:"click",element:"search_result",properties:{search_type:d,search_text:e.name,entity_id:e.id}}),window.location.href="/".concat(d,"/").concat(e.id))};return(0,a.jsxs)("div",{className:ed().searchWrapper,ref:o,children:[(0,a.jsx)(ee.Lt,{text:s("nav.search.".concat(d)),className:ed().entityDropdown,children:Object.keys(es).map(e=>(0,a.jsx)(ee.hP,{onClick:()=>{var t;u(e),null===(t=l.current)||void 0===t||t.focus()},children:s("nav.search.".concat(e))},e))}),(0,a.jsx)(et.Ph,{styles:ei,ref:l,autoFocus:!0,inputId:"global-header-search-input",className:ed().searchInput,placeholder:s("nav.search.search"),closeMenuOnSelect:!0,hideMenu:!p,components:{DropdownIndicator:()=>null,DownChevron:()=>null},noOptionsMessage:()=>null,isSearchable:!0,value:_,onFocus:()=>f(null),onChange:g,inputValue:p,onInputChange:m,options:x?null==x?void 0:x.map(e=>({...e,value:e.id,label:e.name})):[],formatOptionLabel:_?null:e=>(0,a.jsx)(eu,{...e,searchEntity:d}),creatable:!0,createOptionPosition:"first",isValidNewOption:()=>!0,formatCreateLabel:e=>{let t=s("nav.search.search_option.".concat(d));return"".concat(t,": ").concat(e)},onCreateOption:g}),(0,a.jsx)(J.zx,{variant:"icon",onClick:()=>{m(""),f(null),n(!1)},children:(0,a.jsx)(K.default,{})})]})};ef.propTypes={searchOpen:s().bool.isRequired,setSearchOpen:s().func.isRequired};var ep=n(377079),em=n(747726),ex=n.n(em);let eg=e=>{let{children:t,href:n,className:r,id:i}=e;return(0,a.jsx)("a",{href:n,className:(0,d.W)(ex().button,r),id:i||"",children:t})};eg.propTypes={children:s().node.isRequired,className:s().string,href:s().string,id:s().string};let ev=(0,r.createContext)({id:null}),ej=e=>{let{children:t,id:n}=e;return(0,a.jsx)("div",{className:ex().menu,children:(0,a.jsx)(ev.Provider,{value:{id:n},children:t})})};ej.propTypes={children:s().arrayOf(s().shape()).isRequired,id:s().string.isRequired};let eb=e=>{let{children:t,href:n,className:i,icon:s=!0}=e,{id:l}=(0,r.useContext)(ev);return n?(0,a.jsxs)(eg,{href:n,className:i,id:l,children:[t,s&&(0,a.jsx)(ep.default,{className:ex().icon})]}):(0,a.jsxs)("button",{type:"button",className:(0,d.W)(ex().button,i),id:l,children:[t,s&&(0,a.jsx)(ep.default,{className:ex().icon})]})};eb.propTypes={children:s().node.isRequired,className:s().string,href:s().string,icon:s().bool};let ey=e=>{let{children:t,className:n="",anchor:i}=e,{id:s}=(0,r.useContext)(ev);return(0,a.jsx)("ul",{className:(0,d.W)(ex().menuItems,n,ex()[i]),"aria-labelledby":s,children:r.Children.map(t,e=>(0,a.jsx)("li",{className:ex().item,children:e}))})};ey.propTypes={anchor:s().string,children:s().node.isRequired,className:s().string};let eN=e=>{let{children:t,className:n,selectedMenu:i}=e;return t?(0,a.jsx)("ul",{className:(0,d.W)(ex().navGroup,n),children:r.Children.map(t,e=>{if(!e)return null;let t=i&&i===e.props.id?ex().selected:"";return(0,a.jsx)("li",{className:(0,d.W)(ex().navItem,t),children:e},"globalNav-".concat(e.props.id))})}):null};eN.propTypes={children:s().arrayOf(s().node),className:s().string,selectedMenu:s().string};var ew=n.p+"static/media/gift.c4661ca5.svg";let eC=e=>{let{currentAthlete:t}=e,{t:n}=(0,c.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.Qj,{href:"/gift?origin=global_nav",className:ex().giftBtn,children:[(0,a.jsx)("img",{src:ew,alt:"Strava"}),n("nav.primary.gift")]}),(0,a.jsx)(J.Qj,{href:"/subscribe?cta=".concat(t.is_trial_eligible?"free-trial":"premium","&element=link&origin=global_nav"),variant:"primary",className:(0,d.W)(ex().subscribeBtn,t.is_subscriber&&ex().hide),children:n(t.is_trial_eligible?"nav.primary.start_trial":"nav.primary.subscribe")})]})};eC.propTypes={currentAthlete:s().shape()};var ek=n(834406);let eL=ex().nav,eM=Object.freeze({TRAINING:"training-menu",DASHBOARD:"dashboard-menu",MAPS:"maps-menu",CHALLENGES:"challenges-menu"}),eA=e=>{let{selectedMenu:t}=e,{t:n}=(0,c.D)(),r="".concat(eL," ").concat(ex().loggedout);return(0,a.jsxs)("nav",{children:[(0,a.jsxs)(eN,{className:r,selectedMenu:t,children:[(0,a.jsx)(eg,{href:"/mobile",children:n("nav.primary.mobile")}),(0,a.jsx)(eg,{href:"/features",children:n("nav.primary.features")}),(0,a.jsx)(eg,{href:"/subscribe?origin=logged_out_global_nav",children:n("nav.primary.subscribe")}),(0,a.jsx)(eg,{href:"/maps",id:eM.MAPS,children:n("nav.primary.maps")}),(0,a.jsx)(eg,{href:"//stories.strava.com",children:n("nav.primary.stories")})]}),(0,a.jsxs)(eN,{className:"".concat(r," ").concat(ex().linkButtons),children:[(0,a.jsx)(J.Qj,{variant:"primary",href:"/register",className:ex().linkButton,children:n("nav.athlete.sign_up")}),(0,a.jsx)(J.Qj,{href:"/login",className:ex().linkButton,children:n("nav.athlete.log_in")})]})]})};eA.propTypes={selectedMenu:s().string};let eS=e=>{let{currentAthlete:t,selectedMenu:n}=e,{t:i}=(0,c.D)(),[s,l]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef,{searchOpen:s,setSearchOpen:l}),(0,a.jsxs)("nav",{children:[!s&&(0,a.jsxs)(eN,{className:eL,selectedMenu:n,children:[(0,a.jsxs)(ej,{id:eM.DASHBOARD,children:[(0,a.jsx)(eb,{href:"/dashboard",children:i("nav.primary.dashboard")}),(0,a.jsxs)(ey,{children:[(0,a.jsx)("a",{href:"/dashboard",children:i("nav.secondary.dashboard.activity_feed")}),(0,a.jsx)("a",{href:"/clubs",children:i("nav.secondary.dashboard.clubs")}),(0,a.jsx)("a",{href:"/athlete/segments/starred",children:i("nav.secondary.dashboard.my_segments")}),(0,a.jsx)("a",{href:"/athlete/routes",children:i("nav.secondary.dashboard.my_routes")}),(0,a.jsx)("div",{className:ex().subscriptionCallout,children:i("nav.secondary.subscription")}),(0,a.jsx)("a",{href:"/athlete/goals",className:ex().summit,children:i("nav.secondary.dashboard.my_goals")})]})]}),(0,a.jsxs)(ej,{id:eM.TRAINING,children:[(0,a.jsx)(eb,{href:"/athlete/training/log",children:i("nav.primary.training")}),(0,a.jsxs)(ey,{children:[(0,a.jsx)("a",{href:"/athlete/calendar",children:i("nav.secondary.training.training_calendar")}),(0,a.jsx)("a",{href:"/athlete/training",children:i("nav.secondary.training.my_activities")}),(0,a.jsx)("div",{className:ex().subscriptionCallout,children:i("nav.secondary.subscription")}),(0,a.jsx)("a",{href:"/athletes/".concat(t.id,"/training/log"),className:ex().summit,children:i("nav.secondary.training.training_log")}),(0,a.jsx)("a",{href:"/training-plans",className:ex().summit,children:i("nav.secondary.training.training_plans")}),(0,a.jsx)("a",{href:"/athlete/analysis",className:ex().summit,children:i("nav.secondary.training.power_curve")}),(0,a.jsx)("a",{href:"/athlete/fitness",className:ex().summit,children:i("nav.secondary.training.fitness")})]})]}),(0,a.jsx)(eg,{id:eM.MAPS,href:"/maps",children:i("nav.primary.maps")}),(0,a.jsx)(eg,{id:eM.CHALLENGES,href:"/challenges",children:i("nav.primary.challenges")})]}),(0,a.jsxs)(eN,{className:"".concat(eL),children:[(0,a.jsx)(eC,{currentAthlete:t}),(0,a.jsx)(z,{appContext:{useStagingApi:!!ek.env.USE_STAGING_API}}),(0,a.jsxs)(ej,{id:"athlete-menu",children:[(0,a.jsx)(eb,{href:"/athletes/".concat(t.id),children:(0,a.jsx)(R.q,{src:t.profile_medium,type:"athlete",size:"small",name:t.firstname})}),(0,a.jsxs)(ey,{anchor:"right",children:[(0,a.jsx)("a",{href:"/athletes/".concat(t.id,"/follows?type=suggested"),className:ex().primary,children:i("nav.athlete.find_friends")}),(0,a.jsx)("a",{href:"/athletes/".concat(t.id),children:i("nav.athlete.profile")}),(0,a.jsx)("a",{href:"/settings/profile",children:i("nav.athlete.settings")}),(0,a.jsx)("a",{href:"/apps",children:i("nav.athlete.apps")}),(0,a.jsx)("a",{href:"/subscription/perks",children:i("nav.athlete.subscriber_perks")}),(0,a.jsx)("a",{href:"/logout",children:i("nav.athlete.log_out")})]})]}),(0,a.jsxs)(ej,{id:"create-menu",children:[(0,a.jsxs)(eb,{href:"/upload",icon:!1,className:ex().createButton,children:[(0,a.jsx)(Z.default,{className:ex().createButtonBase,title:i("nav.create.create")}),(0,a.jsx)(G.default,{className:ex().createButtonHover,title:i("nav.create.create")})]}),(0,a.jsxs)(ey,{anchor:"right",className:ex().createMenuItems,children:[(0,a.jsxs)("a",{href:"/upload",children:[(0,a.jsx)(Q.default,{size:20}),i("nav.create.upload_activity")]}),(0,a.jsxs)("a",{href:"/upload/manual",children:[(0,a.jsx)(U.default,{size:20}),i("nav.create.manual_entry")]}),(0,a.jsxs)("a",{href:"/maps/create",children:[(0,a.jsx)(X.default,{size:20}),i("nav.create.create_route_v2")]}),(0,a.jsxs)("a",{href:"/athletes/".concat(t.id,"/posts/new"),children:[(0,a.jsx)(Y.default,{size:20}),i("nav.create.create_post_v2")]})]})]})]})]})]})};eS.propTypes={currentAthlete:s().shape({firstname:s().string,id:s().number.isRequired,profile_medium:s().string,is_subscriber:s().bool.isRequired,is_trial_eligible:s().bool.isRequired}).isRequired,selectedMenu:s().string};let eB=new l.S,eI=e=>{let{currentAthlete:t,selectedMenu:n,hasGlobalNavSearchAccess:r=!1}=e;return t?(0,a.jsx)(o.aH,{client:eB,children:(0,a.jsx)(eS,{currentAthlete:t,selectedMenu:n,hasGlobalNavSearchAccess:r})}):(0,a.jsx)(eA,{selectedMenu:n})};eI.propTypes={currentAthlete:s().shape({}),selectedMenu:s().string,hasGlobalNavSearchAccess:s().bool};var eR=n(131791),eE=n(821108),eF=n.n(eE);let eD=e=>{let{currentAthlete:t,selectedMenu:n,variant:r="default"}=e,i=eF().container;return"fluid"===r?i=eF().containerFluid:("simple"===r||"simpleFixed"===r)&&(i=eF().containerSimple),(0,a.jsx)("header",{id:"global-header",className:(0,d.W)(eF().globalHeader,"simpleFixed"===r&&eF().fixed),children:(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("a",{href:"/",children:(0,a.jsx)(eR.$,{alt:"Strava",width:95,height:20})}),"simple"!==r&&"simpleFixed"!==r&&(0,a.jsx)(eI,{currentAthlete:t,selectedMenu:n})]})})};eD.propTypes={currentAthlete:s().shape({}),selectedMenu:s().string,variant:s().oneOf(["default","fluid","simple","simpleFixed"])}},925916:function(e,t,n){"use strict";n.d(t,{O:function(){return b}});var a=n(785893),r=n(667294),i=n(840489),s=n(693197),l=n(600612),o=n(60236),c=n(477612),d=n(615750),u=n(799022),h=n(503753),_=n(875193),f=n(412672),p=n(581932),m=n(974233),x=n.n(m);let g=e=>{let{onDismiss:t,isLoggedIn:n=!1,t:i,dataSharingOptedOut:s}=e,{logError:m}=(0,u.D)(),{track:g}=(0,h.O)(),[v,j]=(0,_.F)(!1),[b,y]=(0,_.F)(s||!1);(0,r.useEffect)(()=>{(0,o.Z)(s)&&(j(!0),(async()=>{var e;let t=await (0,c.Vr)({logError:m});(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.opted_out)?y(!0):j(!1)})())},[m,j,y,s]),(0,r.useEffect)(()=>{g({category:"privacy_compliance",page:"do_not_share_info",action:"screen_enter",element:"modal",properties:{page_url:window.location.href}})},[g]);let N=async()=>{if(j(!0),n)try{await (0,c.wO)({settings:{data_sharing:d.n9.optedOut},logError:m}),y(!0)}catch(e){j(!1)}else{let e;e=/localhost/.test(window.location.hostname)?"localhost":/staging\./.test(window.location.hostname)?".staging.strava.com":".strava.com";let t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie="_strava_cpra=".concat(d.n9.optedOut,";")+"expires=".concat(t.toUTCString(),";")+"domain=".concat(e,";")+"path=/;",y(!0)}g({category:"privacy_compliance",page:"do_not_share_info",action:"click",element:"opt_out"})};return(0,a.jsxs)(p.u_,{isOpen:!0,onDismiss:t,"aria-label":i("modal.title"),className:x().modal,hasClose:!0,children:[(0,a.jsx)(p.r6,{className:x().modalTitle,children:i("modal.title")}),(0,a.jsxs)(p.fe,{className:x().modalBody,children:[(0,a.jsx)(l.Lu,{tagName:"p",content:i("modal.body_1")}),(0,a.jsx)(l.Lu,{tagName:"p",content:i("modal.body_2_html")})]}),(0,a.jsxs)(p.nK,{className:x().modalActions,children:[(0,a.jsx)(f.zx,{type:"button",onClick:t,variant:"primaryOutline",children:i("modal.go_back")}),(0,a.jsx)(f.zx,{type:"button",onClick:N,variant:"primary",disabled:v||b,"data-cy":"cpra-opt-out-btn",children:i(b?"modal.opted_out":"modal.opt_out")})]})]})};var v=n(919025),j=n.n(v);let b=e=>{let{isLoggedIn:t=!1,className:n="",i18nPrefix:l="",dataSharingOptedOut:o}=e,[c,d]=(0,r.useState)(!1),{t:u}=(0,s.D)(),h=(0,r.useCallback)((e,t)=>u("".concat(l,".cpra_compliance_cta.").concat(e),{...t}),[u,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{id:"cpra-compliance-cta",className:(0,i.W)(j().cpraButton,n),onClick:()=>d(!0),children:h("cta")}),c&&(0,a.jsx)(g,{onDismiss:()=>d(!1),isLoggedIn:t,t:h,dataSharingOptedOut:o})]})}},352194:function(e){e.exports={closeButton:"EmailVerificationModal_closeButton__U7n6I",modalBody:"EmailVerificationModal_modalBody__Lo3Ef",confirmEmailIcon:"EmailVerificationModal_confirmEmailIcon__62Fjh",emailText:"EmailVerificationModal_emailText___E0KR"}},271866:function(e){e.exports={avatar:"Avatar_avatar__pIUtQ",imgWrapper:"Avatar_imgWrapper__FoCtT",badge:"Avatar_badge__mrH2k",athlete:"Avatar_athlete___Ysb8",xsmall:"Avatar_xsmall__AdbJW",small:"Avatar_small__8J6Gi",large:"Avatar_large__Q51IP",xlarge:"Avatar_xlarge__2c_uR",club:"Avatar_club__ULVYu",default:"Avatar_default__DNP8u"}},805431:function(e){e.exports={btn:"Button_btn__EdK33",default:"Button_default__JSqPI",primary:"Button_primary___8ywh",primaryOutline:"Button_primaryOutline__FsWzb",secondary:"Button_secondary__N_XMn",icon:"Button_icon__HDGEw",text:"Button_text__d_3rf",info:"Button_info__MaNWW",danger:"Button_danger__Cw9rY",link:"Button_link__8qMwp"}},464307:function(e){e.exports={btn:"Dropdown_btn__e2tzk",icon:"Dropdown_icon__z6rY8",list:"Dropdown_list__lJGU6",item:"Dropdown_item__4qn56"}},41761:function(e){e.exports={overlay:"Modal_overlay__FcI_u",dialog:"Modal_dialog__Kk2bo",closeButton:"Modal_closeButton__vc3WF",title:"Modal_title__ZYLgm",heroImage:"Modal_heroImage__4NqNT",body:"Modal_body__1S4MY",actions:"Modal_actions__C899X"}},691686:function(e){e.exports={select:"Select_select__QiZGT"}},649076:function(e){e.exports={spinner:"Spinner_spinner__pA5dm",graphic:"Spinner_graphic__FjV8E",spin:"Spinner_spin__oBXNQ"}},855747:function(e){e.exports={notificationsMenu:"Notifications_notificationsMenu__MlTl6",notificationsButton:"Notifications_notificationsButton__cutco",notificationsIcon:"Notifications_notificationsIcon__e0A1L",open:"Notifications_open__g74W5",notificationsCount:"Notifications_notificationsCount__kRzk4",navBarButton:"Notifications_navBarButton__DBxCJ",active:"Notifications_active__svuS1",icon:"Notifications_icon__M9ZDq"}},189290:function(e){e.exports={notificationContent:"NotificationContent_notificationContent__0KZqn",notificationAvatar:"NotificationContent_notificationAvatar__uMIe2",textContainer:"NotificationContent_textContainer__zjV9X",notificationTitle:"NotificationContent_notificationTitle__7HIs3",displayDate:"NotificationContent_displayDate__2fZWn"}},975344:function(e){e.exports={notifications:"NotificationsList_notifications__4Fo8H",notificationsEmpty:"NotificationsList_notificationsEmpty__z1ty_",notificationUnread:"NotificationsList_notificationUnread__q5LNq"}},3587:function(e){e.exports={grid:"GlobalFooter_grid__fVs2M",globalFooter:"GlobalFooter_globalFooter__XQI_m",cpraComplianceCta:"GlobalFooter_cpraComplianceCta__FDNk_",container:"GlobalFooter_container__Yq5Ny",branding:"GlobalFooter_branding__kuiOL",copyright:"GlobalFooter_copyright__e8ryt",navList:"GlobalFooter_navList__NyAy4"}},878486:function(e){e.exports={dropdown:"LanguagePicker_dropdown__xD1Rj"}},821108:function(e){e.exports={globalHeader:"GlobalHeader_globalHeader__NxDNZ",fixed:"GlobalHeader_fixed__rt1_v",branding:"GlobalHeader_branding__bG8cP",container:"GlobalHeader_container__N7jlr",containerFluid:"GlobalHeader_containerFluid__LahDm",containerSimple:"GlobalHeader_containerSimple__nbSWP"}},618748:function(e){e.exports={searchIcon:"Search_searchIcon__G_dcV",searchWrapper:"Search_searchWrapper__HHtV1",entityDropdown:"Search_entityDropdown__u_nv9",searchInput:"Search_searchInput__mLIHh",searchOption:"Search_searchOption__1vZA0",multiline:"Search_multiline__d7I4_",subtitle:"Search_subtitle__5qf_2"}},747726:function(e){e.exports={nav:"styles_nav__VC8vO",loggedout:"styles_loggedout__MNMCM",linkButton:"styles_linkButton__Zl9rZ",linkButtons:"styles_linkButtons__CE_F1",giftBtn:"styles_giftBtn__b8O8V",subscribeBtn:"styles_subscribeBtn__yUh7x",hide:"styles_hide__silPG",primary:"styles_primary__5ZyQH",summit:"styles_summit__PgHd8",selected:"styles_selected__5OPsp",navItem:"styles_navItem__0mE5x",button:"styles_button__0P3_w",create:"styles_create__gvRRX",navGroup:"styles_navGroup__vqYfX",icon:"styles_icon__2Fj5H",menu:"styles_menu____5De",createButtonBase:"styles_createButtonBase__VRRe8",createButtonHover:"styles_createButtonHover__Ul6af",menuItems:"styles_menuItems__S3O0T",enterMenu:"styles_enterMenu__awqoa",right:"styles_right__bjDAB",subscriptionCallout:"styles_subscriptionCallout__ixh0Z",createButton:"styles_createButton__cjOec",createMenuItems:"styles_createMenuItems__CVMJX"}},919025:function(e){e.exports={cpraButton:"CPRAComplianceCTA_cpraButton__4ARke"}},974233:function(e){e.exports={modal:"CPRAComplianceModal_modal__WwXf_",modalTitle:"CPRAComplianceModal_modalTitle__wjkpZ",modalBody:"CPRAComplianceModal_modalBody__c2YiJ",modalActions:"CPRAComplianceModal_modalActions__lObP8"}},982405:function(){}}]);